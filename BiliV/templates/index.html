<!doctype html>
<html  lang="zh-CN">
<head>
	<meta charset="UTF-8">
    <title>videoRecommendation</title>
    <link rel="stylesheet" href="../static/css/reset.css">
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../static/css/waterfall.css">
  
</head>
<body>
    <nav class="header navbar navbar-default navbar-fixed-top " role="navigation">
    <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="header-logo" href="#"></a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
	<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		<ul class="nav navbar-nav navbar-right">
			{% if g.user and g.user.is_authenticated() %}
        <li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown">
			<img id="user-avatar" src="g.user.image_url">
            <span class="name">g.user.screen_name</span><span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="url_for('user')">我的主页</a></li>
            <li class="divider"></li>
			<li><a href="{{url_for('.logout')}}">退出</a></li>
			{% endif %}
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div id="container"></div>
<script type="text/x-handlebars-template" id="waterfall-tpl">
	<!-- result -->	
<div class="box">
    <div class="item">
         <a href="play.html">
        <img src="{{image}}" width="{{width}}" height="{{height}}" />
       </a>
       <div class="mask"></div>
    </div>
    <div class="item-info">
    <p>【10月】Fate/stay night -UBW- 06</p>
    </div>
    <div class="item-reason">
     <h6>推荐原因</h6> 
     <p>因为你喜欢萌属性</p>
     <p>你喜欢看《我是双马尾》</p>
    </div>
    <div class="item-liker">
       <span>谁还喜欢这个视频</span>
       <a href="#"><img src="img/user1.png"></a>
       <a href="#"><img src="img/user2.png"></a>
       <a href="#"><img src="img/user1.png"></a>
       <a href="#"><img src="img/user2.png"></a>
    </div>
 </div>
 <!-- result -->
</script>
<script src="js/libs/jquery/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/libs/handlebars/handlebars.js"></script>
<script src="js/waterfall.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
<script>
$('#container').waterfall({
    itemCls: 'box',
    colWidth: 320,  
    gutterWidth: 70,
    gutterHeight: 50,
    maxCol: 4,
    checkImagesLoaded: false,
    callbacks: {
        
        loadingFinished: function($loading, isBeyondMaxPage) {
            if ( !isBeyondMaxPage ) {
                $loading.fadeOut()
            } else {
                $loading.hide();
                $('#page-navigation').show();
            }
        },
        renderData: function (data, dataType) {
            var tpl,
                template,
                resultNum = data.total;
                
            if ( resultNum < 16) {
                $('#container').waterfall('pause', function() {
                    $('#waterfall-message').html('<p style="color:#666;">no more data...</p>')
                    //alert('no more data');
                });
            }
    
            if ( dataType === 'json' ||  dataType === 'jsonp'  ) { // json or jsonp format
                tpl = $('#waterfall-tpl').html();
                template = Handlebars.compile(tpl);
    
                return template(data);
            } else { // html format
                return data;
            }
        }
    },
    path: function(page) {
       return 'data/data' + page + '.json';
    }
});
</script>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-1245097-16']);
_gaq.push(['_trackPageview']);
_gaq.push(['_trackPageLoadTime']);
(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = 'https://ssl.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</body>
</html>
